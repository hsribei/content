<h2 id="step-4-histogrambar-subcomponent">Step 4: HistogramBar (sub)component</h2>
<p>Before our histogram shows up, we need another component: <code style="white-space: pre-wrap;">HistogramBar</code>. We <em>could</em> have shoved all of it in the <code style="white-space: pre-wrap;">makeBar</code> function, but it makes sense to keep separate. Better future flexibility.</p>
<p>You can write small components like this in the same file as their main component. They’re not reusable since they fit a specific use-case, and they’re small enough so your files don’t get too crazy.</p>
<p>But in the interest of readability, let’s make a <code style="white-space: pre-wrap;">HistogramBar</code> file.</p>
<div class="sourceCode" id="cb82" data-caption="HistogramBar component" style="overflow: visible; margin: 1em 0;"><pre class="sourceCode javascript" style="overflow: visible; margin: 0;"><code class="sourceCode javascript" style="overflow: visible; white-space: pre; position: relative;"><a class="sourceLine" id="cb82-1" title="1" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;"><span class="co" style="color: #60a0b0; font-style: italic;">// src/components/Histogram/HistogramBar.js</span></a>
<a class="sourceLine" id="cb82-2" title="2" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;"><span class="im">import</span> React <span class="im">from</span> <span class="st" style="color: #4070a0;">&quot;react&quot;</span><span class="op" style="color: #666666;">;</span></a>
<a class="sourceLine" id="cb82-3" title="3" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;"></a>
<a class="sourceLine" id="cb82-4" title="4" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;"><span class="kw" style="color: #007020; font-weight: bold;">const</span> HistogramBar <span class="op" style="color: #666666;">=</span> (<span class="op" style="color: #666666;">{</span> percent<span class="op" style="color: #666666;">,</span> x<span class="op" style="color: #666666;">,</span> y<span class="op" style="color: #666666;">,</span> width<span class="op" style="color: #666666;">,</span> height <span class="op" style="color: #666666;">}</span>) <span class="op" style="color: #666666;">=&gt;</span> <span class="op" style="color: #666666;">{</span></a>
<a class="sourceLine" id="cb82-5" title="5" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">    <span class="kw" style="color: #007020; font-weight: bold;">let</span> translate <span class="op" style="color: #666666;">=</span> <span class="vs" style="color: #4070a0;">`translate(</span><span class="sc" style="color: #4070a0;">${</span>x<span class="sc" style="color: #4070a0;">}</span><span class="vs" style="color: #4070a0;">, </span><span class="sc" style="color: #4070a0;">${</span>y<span class="sc" style="color: #4070a0;">}</span><span class="vs" style="color: #4070a0;">)`</span><span class="op" style="color: #666666;">,</span></a>
<a class="sourceLine" id="cb82-6" title="6" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">        label <span class="op" style="color: #666666;">=</span> <span class="va" style="color: #19177c;">percent</span>.<span class="at" style="color: #7d9029;">toFixed</span>(<span class="dv" style="color: #40a070;">0</span>) <span class="op" style="color: #666666;">+</span> <span class="st" style="color: #4070a0;">&quot;%&quot;</span><span class="op" style="color: #666666;">;</span></a>
<a class="sourceLine" id="cb82-7" title="7" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;"></a>
<a class="sourceLine" id="cb82-8" title="8" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">    <span class="cf" style="color: #007020; font-weight: bold;">if</span> (percent <span class="op" style="color: #666666;">&lt;</span> <span class="dv" style="color: #40a070;">1</span>) <span class="op" style="color: #666666;">{</span></a>
<a class="sourceLine" id="cb82-9" title="9" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">        label <span class="op" style="color: #666666;">=</span> <span class="va" style="color: #19177c;">percent</span>.<span class="at" style="color: #7d9029;">toFixed</span>(<span class="dv" style="color: #40a070;">2</span>) <span class="op" style="color: #666666;">+</span> <span class="st" style="color: #4070a0;">&quot;%&quot;</span><span class="op" style="color: #666666;">;</span></a>
<a class="sourceLine" id="cb82-10" title="10" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">    <span class="op" style="color: #666666;">}</span></a>
<a class="sourceLine" id="cb82-11" title="11" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;"></a>
<a class="sourceLine" id="cb82-12" title="12" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">    <span class="cf" style="color: #007020; font-weight: bold;">if</span> (width <span class="op" style="color: #666666;">&lt;</span> <span class="dv" style="color: #40a070;">20</span>) <span class="op" style="color: #666666;">{</span></a>
<a class="sourceLine" id="cb82-13" title="13" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">        label <span class="op" style="color: #666666;">=</span> <span class="va" style="color: #19177c;">label</span>.<span class="at" style="color: #7d9029;">replace</span>(<span class="st" style="color: #4070a0;">&quot;%&quot;</span><span class="op" style="color: #666666;">,</span> <span class="st" style="color: #4070a0;">&quot;&quot;</span>)<span class="op" style="color: #666666;">;</span></a>
<a class="sourceLine" id="cb82-14" title="14" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">    <span class="op" style="color: #666666;">}</span></a>
<a class="sourceLine" id="cb82-15" title="15" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;"></a>
<a class="sourceLine" id="cb82-16" title="16" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">    <span class="cf" style="color: #007020; font-weight: bold;">if</span> (width <span class="op" style="color: #666666;">&lt;</span> <span class="dv" style="color: #40a070;">10</span>) <span class="op" style="color: #666666;">{</span></a>
<a class="sourceLine" id="cb82-17" title="17" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">        label <span class="op" style="color: #666666;">=</span> <span class="st" style="color: #4070a0;">&quot;&quot;</span><span class="op" style="color: #666666;">;</span></a>
<a class="sourceLine" id="cb82-18" title="18" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">    <span class="op" style="color: #666666;">}</span></a>
<a class="sourceLine" id="cb82-19" title="19" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;"></a>
<a class="sourceLine" id="cb82-20" title="20" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">    <span class="cf" style="color: #007020; font-weight: bold;">return</span> (</a>
<a class="sourceLine" id="cb82-21" title="21" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">        <span class="op" style="color: #666666;">&lt;</span>g transform<span class="op" style="color: #666666;">={</span>translate<span class="op" style="color: #666666;">}</span> className<span class="op" style="color: #666666;">=</span><span class="st" style="color: #4070a0;">&quot;bar&quot;</span><span class="op" style="color: #666666;">&gt;</span></a>
<a class="sourceLine" id="cb82-22" title="22" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">            <span class="op" style="color: #666666;">&lt;</span>rect</a>
<a class="sourceLine" id="cb82-23" title="23" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">                width<span class="op" style="color: #666666;">={</span>width<span class="op" style="color: #666666;">}</span></a>
<a class="sourceLine" id="cb82-24" title="24" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">                height<span class="op" style="color: #666666;">={</span>height <span class="op" style="color: #666666;">-</span> <span class="dv" style="color: #40a070;">2</span><span class="op" style="color: #666666;">}</span></a>
<a class="sourceLine" id="cb82-25" title="25" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">                transform<span class="op" style="color: #666666;">=</span><span class="st" style="color: #4070a0;">&quot;translate(0, 1)&quot;</span></a>
<a class="sourceLine" id="cb82-26" title="26" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">            /&gt;</a>
<a class="sourceLine" id="cb82-27" title="27" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">            <span class="op" style="color: #666666;">&lt;</span>text textAnchor<span class="op" style="color: #666666;">=</span><span class="st" style="color: #4070a0;">&quot;end&quot;</span> x<span class="op" style="color: #666666;">={</span>width <span class="op" style="color: #666666;">-</span> <span class="dv" style="color: #40a070;">5</span><span class="op" style="color: #666666;">}</span> y<span class="op" style="color: #666666;">={</span>height / <span class="dv" style="color: #40a070;">2</span> <span class="op" style="color: #666666;">+</span> <span class="dv" style="color: #40a070;">3</span><span class="op" style="color: #666666;">}&gt;</span></a>
<a class="sourceLine" id="cb82-28" title="28" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">                <span class="op" style="color: #666666;">{</span>label<span class="op" style="color: #666666;">}</span></a>
<a class="sourceLine" id="cb82-29" title="29" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">            &lt;/text<span class="op" style="color: #666666;">&gt;</span></a>
<a class="sourceLine" id="cb82-30" title="30" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">        &lt;/g<span class="op" style="color: #666666;">&gt;</span></a>
<a class="sourceLine" id="cb82-31" title="31" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">    )<span class="op" style="color: #666666;">;</span></a>
<a class="sourceLine" id="cb82-32" title="32" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;"><span class="op" style="color: #666666;">};</span></a>
<a class="sourceLine" id="cb82-33" title="33" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;"></a>
<a class="sourceLine" id="cb82-34" title="34" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;"><span class="im">export</span> <span class="im">default</span> HistogramBar<span class="op" style="color: #666666;">;</span></a></code></pre></div>
<p>Pretty long for a functional component. Most of it goes into deciding how much precision to render in the label, so it’s okay.</p>
<p>We start with an SVG translate and a default <code style="white-space: pre-wrap;">label</code>. Then we update the label based on the bar size and its value.</p>
<p>When we have a label we like, we return a <code style="white-space: pre-wrap;">&lt;g&gt;</code> grouping element with a rectangle and a text. Both positioned based on the <code style="white-space: pre-wrap;">width</code> and <code style="white-space: pre-wrap;">height</code> of the bar.</p>
<p>Make sure to import <code style="white-space: pre-wrap;">HistogramBar</code> in the main <code style="white-space: pre-wrap;">Histogram</code> file.</p>
<div class="sourceCode" id="cb83" data-caption="HistogramBar import" style="overflow: visible; margin: 1em 0;"><pre class="sourceCode javascript" style="overflow: visible; margin: 0;"><code class="sourceCode javascript" style="overflow: visible; white-space: pre; position: relative;"><a class="sourceLine" id="cb83-1" title="1" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;"><span class="co" style="color: #60a0b0; font-style: italic;">// src/components/Histogram/Histogram.js</span></a>
<a class="sourceLine" id="cb83-2" title="2" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;"></a>
<a class="sourceLine" id="cb83-3" title="3" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;"><span class="im">import</span> HistogramBar <span class="im">from</span> <span class="st" style="color: #4070a0;">&#39;./HistogramBar&#39;</span></a></code></pre></div>
<p>You should now see a histogram.</p>
<figure>
<img src="https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/2018/histogram-without-axis.png" alt="Histogram without axis"><figcaption>Histogram without axis</figcaption>
</figure>