<h2 id="step-5-add-us-state-and-job-title-filters">
  Step 5: Add US state and Job Title filters
</h2>
<p>
  With all that done, we can add two more filters: US states and job
  titles. Our <code style="white-space: pre-wrap;">App</code> component is
  already set up to use them, so we just have to add them to the
  <code style="white-space: pre-wrap;">Controls</code> component.
</p>
<p>
  We’ll start with the
  <code style="white-space: pre-wrap;">render</code> method, then handle
  the parts I said earlier would look repetitive.
</p>
<div
  class="sourceCode"
  id="cb113"
  data-caption="Adding two more rows to Controls"
  style="overflow: visible; margin: 1em 0;"
>
  <pre
    class="sourceCode javascript"
    style="overflow: visible; margin: 0;"
  ><code class="sourceCode javascript" style="overflow: visible; white-space: pre; position: relative;"><a class="sourceLine" id="cb113-1" title="1" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;"><span class="co" style="color: #60a0b0; font-style: italic;">// src/components/Controls/index.js</span></a>
<a class="sourceLine" id="cb113-2" title="2" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;"><span class="kw" style="color: #007020; font-weight: bold;">class</span> Controls <span class="kw" style="color: #007020; font-weight: bold;">extends</span> Component <span class="op" style="color: #666666;">{</span></a>
<a class="sourceLine" id="cb113-3" title="3" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">    <span class="co" style="color: #60a0b0; font-style: italic;">// ...</span></a>
<a class="sourceLine" id="cb113-4" title="4" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">    <span class="at" style="color: #7d9029;">render</span>() <span class="op" style="color: #666666;">{</span></a>
<a class="sourceLine" id="cb113-5" title="5" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">        <span class="kw" style="color: #007020; font-weight: bold;">const</span> <span class="op" style="color: #666666;">{</span> data <span class="op" style="color: #666666;">}</span> <span class="op" style="color: #666666;">=</span> <span class="kw" style="color: #007020; font-weight: bold;">this</span>.<span class="at" style="color: #7d9029;">props</span><span class="op" style="color: #666666;">;</span></a>
<a class="sourceLine" id="cb113-6" title="6" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;"></a>
<a class="sourceLine" id="cb113-7" title="7" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">        <span class="kw" style="color: #007020; font-weight: bold;">const</span> years <span class="op" style="color: #666666;">=</span> <span class="kw" style="color: #007020; font-weight: bold;">new</span> <span class="at" style="color: #7d9029;">Set</span>(<span class="va" style="color: #19177c;">data</span>.<span class="at" style="color: #7d9029;">map</span>(d <span class="kw" style="color: #007020; font-weight: bold;">=&gt;</span> <span class="va" style="color: #19177c;">d</span>.<span class="va" style="color: #19177c;">submit_date</span>.<span class="at" style="color: #7d9029;">getFullYear</span>()))<span class="op" style="color: #666666;">,</span></a>
<a class="sourceLine" id="cb113-8" title="8" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">              <span class="co" style="color: #60a0b0; font-style: italic;">// Insert the line(s) between here...</span></a>
<a class="sourceLine" id="cb113-9" title="9" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">              jobTitles <span class="op" style="color: #666666;">=</span> <span class="kw" style="color: #007020; font-weight: bold;">new</span> <span class="at" style="color: #7d9029;">Set</span>(<span class="va" style="color: #19177c;">data</span>.<span class="at" style="color: #7d9029;">map</span>(d <span class="kw" style="color: #007020; font-weight: bold;">=&gt;</span> <span class="va" style="color: #19177c;">d</span>.<span class="at" style="color: #7d9029;">clean_job_title</span>))<span class="op" style="color: #666666;">,</span></a>
<a class="sourceLine" id="cb113-10" title="10" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">              USstates <span class="op" style="color: #666666;">=</span> <span class="kw" style="color: #007020; font-weight: bold;">new</span> <span class="at" style="color: #7d9029;">Set</span>(<span class="va" style="color: #19177c;">data</span>.<span class="at" style="color: #7d9029;">map</span>(d <span class="kw" style="color: #007020; font-weight: bold;">=&gt;</span> <span class="va" style="color: #19177c;">d</span>.<span class="at" style="color: #7d9029;">USstate</span>))<span class="op" style="color: #666666;">;</span></a>
<a class="sourceLine" id="cb113-11" title="11" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">              <span class="co" style="color: #60a0b0; font-style: italic;">// ...and here.</span></a>
<a class="sourceLine" id="cb113-12" title="12" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;"></a>
<a class="sourceLine" id="cb113-13" title="13" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">        <span class="cf" style="color: #007020; font-weight: bold;">return</span> (</a>
<a class="sourceLine" id="cb113-14" title="14" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">            <span class="op" style="color: #666666;">&lt;</span>div<span class="op" style="color: #666666;">&gt;</span></a>
<a class="sourceLine" id="cb113-15" title="15" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">                <span class="op" style="color: #666666;">&lt;</span>ControlRow data<span class="op" style="color: #666666;">={</span>data<span class="op" style="color: #666666;">}</span></a>
<a class="sourceLine" id="cb113-16" title="16" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">                            toggleNames<span class="op" style="color: #666666;">={</span><span class="va" style="color: #19177c;">Array</span>.<span class="at" style="color: #7d9029;">from</span>(<span class="va" style="color: #19177c;">years</span>.<span class="at" style="color: #7d9029;">values</span>())<span class="op" style="color: #666666;">}</span></a>
<a class="sourceLine" id="cb113-17" title="17" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">                            picked<span class="op" style="color: #666666;">={</span><span class="kw" style="color: #007020; font-weight: bold;">this</span>.<span class="va" style="color: #19177c;">state</span>.<span class="at" style="color: #7d9029;">year</span><span class="op" style="color: #666666;">}</span></a>
<a class="sourceLine" id="cb113-18" title="18" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">                            updateDataFilter<span class="op" style="color: #666666;">={</span><span class="kw" style="color: #007020; font-weight: bold;">this</span>.<span class="at" style="color: #7d9029;">updateYearFilter</span><span class="op" style="color: #666666;">}</span></a>
<a class="sourceLine" id="cb113-19" title="19" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">                            /&gt;</a>
<a class="sourceLine" id="cb113-20" title="20" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;"></a>
<a class="sourceLine" id="cb113-21" title="21" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">            <span class="co" style="color: #60a0b0; font-style: italic;">// Insert the line(s) between here...</span></a>
<a class="sourceLine" id="cb113-22" title="22" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">                <span class="op" style="color: #666666;">&lt;</span>ControlRow data<span class="op" style="color: #666666;">={</span>data<span class="op" style="color: #666666;">}</span></a>
<a class="sourceLine" id="cb113-23" title="23" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">                            toggleNames<span class="op" style="color: #666666;">={</span><span class="va" style="color: #19177c;">Array</span>.<span class="at" style="color: #7d9029;">from</span>(<span class="va" style="color: #19177c;">jobTitles</span>.<span class="at" style="color: #7d9029;">values</span>())<span class="op" style="color: #666666;">}</span></a>
<a class="sourceLine" id="cb113-24" title="24" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">                            picked<span class="op" style="color: #666666;">={</span><span class="kw" style="color: #007020; font-weight: bold;">this</span>.<span class="va" style="color: #19177c;">state</span>.<span class="at" style="color: #7d9029;">jobTitle</span><span class="op" style="color: #666666;">}</span></a>
<a class="sourceLine" id="cb113-25" title="25" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">                            updateDataFilter<span class="op" style="color: #666666;">={</span><span class="kw" style="color: #007020; font-weight: bold;">this</span>.<span class="at" style="color: #7d9029;">updateJobTitleFilter</span><span class="op" style="color: #666666;">}</span> /&gt;</a>
<a class="sourceLine" id="cb113-26" title="26" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;"></a>
<a class="sourceLine" id="cb113-27" title="27" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">                <span class="op" style="color: #666666;">&lt;</span>ControlRow data<span class="op" style="color: #666666;">={</span>data<span class="op" style="color: #666666;">}</span></a>
<a class="sourceLine" id="cb113-28" title="28" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">                            toggleNames<span class="op" style="color: #666666;">={</span><span class="va" style="color: #19177c;">Array</span>.<span class="at" style="color: #7d9029;">from</span>(<span class="va" style="color: #19177c;">USstates</span>.<span class="at" style="color: #7d9029;">values</span>())<span class="op" style="color: #666666;">}</span></a>
<a class="sourceLine" id="cb113-29" title="29" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">                            picked<span class="op" style="color: #666666;">={</span><span class="kw" style="color: #007020; font-weight: bold;">this</span>.<span class="va" style="color: #19177c;">state</span>.<span class="at" style="color: #7d9029;">USstate</span><span class="op" style="color: #666666;">}</span></a>
<a class="sourceLine" id="cb113-30" title="30" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">                            updateDataFilter<span class="op" style="color: #666666;">={</span><span class="kw" style="color: #007020; font-weight: bold;">this</span>.<span class="at" style="color: #7d9029;">updateUSstateFilter</span><span class="op" style="color: #666666;">}</span></a>
<a class="sourceLine" id="cb113-31" title="31" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">                            capitalize<span class="op" style="color: #666666;">=</span><span class="st" style="color: #4070a0;">&quot;true&quot;</span> /&gt;</a>
<a class="sourceLine" id="cb113-32" title="32" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">                <span class="co" style="color: #60a0b0; font-style: italic;">// ...and here.</span></a>
<a class="sourceLine" id="cb113-33" title="33" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">            &lt;/div<span class="op" style="color: #666666;">&gt;</span></a>
<a class="sourceLine" id="cb113-34" title="34" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">        )</a>
<a class="sourceLine" id="cb113-35" title="35" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">    <span class="op" style="color: #666666;">}</span></a>
<a class="sourceLine" id="cb113-36" title="36" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;"><span class="op" style="color: #666666;">}</span></a></code></pre>
</div>
<p>Ok, this part is plenty repetitive, too.</p>
<p>
  We created new sets for
  <code style="white-space: pre-wrap;">jobTitles</code> and
  <code style="white-space: pre-wrap;">USstates</code>, then rendered two
  more <code style="white-space: pre-wrap;">ControlRow</code> elements with
  appropriate attributes. They get
  <code style="white-space: pre-wrap;">toggleNames</code> for building the
  buttons, <code style="white-space: pre-wrap;">picked</code> to know which
  is active, an
  <code style="white-space: pre-wrap;">updateDataFilter</code> callback,
  and we tell US states to render capitalized.
</p>
<p>
  The implementations of those
  <code style="white-space: pre-wrap;">updateDataFilter</code> callbacks
  follow the same pattern as
  <code style="white-space: pre-wrap;">updateYearFilter</code>.
</p>
<div
  class="sourceCode"
  id="cb114"
  data-caption="new updateDataFilter callbacks"
  style="overflow: visible; margin: 1em 0;"
>
  <pre
    class="sourceCode javascript"
    style="overflow: visible; margin: 0;"
  ><code class="sourceCode javascript" style="overflow: visible; white-space: pre; position: relative;"><a class="sourceLine" id="cb114-1" title="1" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;"><span class="co" style="color: #60a0b0; font-style: italic;">// src/components/Controls/index.js</span></a>
<a class="sourceLine" id="cb114-2" title="2" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;"></a>
<a class="sourceLine" id="cb114-3" title="3" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;"><span class="kw" style="color: #007020; font-weight: bold;">class</span> Controls <span class="kw" style="color: #007020; font-weight: bold;">extends</span> <span class="va" style="color: #19177c;">React</span>.<span class="at" style="color: #7d9029;">Component</span> <span class="op" style="color: #666666;">{</span></a>
<a class="sourceLine" id="cb114-4" title="4" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">    state <span class="op" style="color: #666666;">=</span> <span class="op" style="color: #666666;">{</span></a>
<a class="sourceLine" id="cb114-5" title="5" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">        <span class="dt" style="color: #902000;">yearFilter</span><span class="op" style="color: #666666;">:</span> () <span class="kw" style="color: #007020; font-weight: bold;">=&gt;</span> <span class="kw" style="color: #007020; font-weight: bold;">true</span><span class="op" style="color: #666666;">,</span></a>
<a class="sourceLine" id="cb114-6" title="6" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">        <span class="dt" style="color: #902000;">jobTitleFilter</span><span class="op" style="color: #666666;">:</span> () <span class="kw" style="color: #007020; font-weight: bold;">=&gt;</span> <span class="kw" style="color: #007020; font-weight: bold;">true</span><span class="op" style="color: #666666;">,</span></a>
<a class="sourceLine" id="cb114-7" title="7" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">        <span class="dt" style="color: #902000;">USstateFilter</span><span class="op" style="color: #666666;">:</span> () <span class="kw" style="color: #007020; font-weight: bold;">=&gt;</span> <span class="kw" style="color: #007020; font-weight: bold;">true</span><span class="op" style="color: #666666;">,</span></a>
<a class="sourceLine" id="cb114-8" title="8" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">        <span class="dt" style="color: #902000;">year</span><span class="op" style="color: #666666;">:</span> <span class="st" style="color: #4070a0;">&quot;*&quot;</span><span class="op" style="color: #666666;">,</span></a>
<a class="sourceLine" id="cb114-9" title="9" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">        <span class="dt" style="color: #902000;">USstate</span><span class="op" style="color: #666666;">:</span> <span class="st" style="color: #4070a0;">&quot;*&quot;</span><span class="op" style="color: #666666;">,</span></a>
<a class="sourceLine" id="cb114-10" title="10" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">        <span class="dt" style="color: #902000;">jobTitle</span><span class="op" style="color: #666666;">:</span> <span class="st" style="color: #4070a0;">&quot;*&quot;</span></a>
<a class="sourceLine" id="cb114-11" title="11" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">    <span class="op" style="color: #666666;">};</span></a>
<a class="sourceLine" id="cb114-12" title="12" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;"></a>
<a class="sourceLine" id="cb114-13" title="13" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">    updateJobTitleFilter <span class="op" style="color: #666666;">=</span> (title<span class="op" style="color: #666666;">,</span> reset) <span class="kw" style="color: #007020; font-weight: bold;">=&gt;</span> <span class="op" style="color: #666666;">{</span></a>
<a class="sourceLine" id="cb114-14" title="14" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">        <span class="kw" style="color: #007020; font-weight: bold;">let</span> filter <span class="op" style="color: #666666;">=</span> d <span class="kw" style="color: #007020; font-weight: bold;">=&gt;</span> <span class="va" style="color: #19177c;">d</span>.<span class="at" style="color: #7d9029;">clean_job_title</span> <span class="op" style="color: #666666;">===</span> title<span class="op" style="color: #666666;">;</span></a>
<a class="sourceLine" id="cb114-15" title="15" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;"></a>
<a class="sourceLine" id="cb114-16" title="16" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">        <span class="cf" style="color: #007020; font-weight: bold;">if</span> (reset <span class="op" style="color: #666666;">||</span> <span class="op" style="color: #666666;">!</span>title) <span class="op" style="color: #666666;">{</span></a>
<a class="sourceLine" id="cb114-17" title="17" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">            filter <span class="op" style="color: #666666;">=</span> () <span class="kw" style="color: #007020; font-weight: bold;">=&gt;</span> <span class="kw" style="color: #007020; font-weight: bold;">true</span><span class="op" style="color: #666666;">;</span></a>
<a class="sourceLine" id="cb114-18" title="18" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">            title <span class="op" style="color: #666666;">=</span> <span class="st" style="color: #4070a0;">&quot;*&quot;</span><span class="op" style="color: #666666;">;</span></a>
<a class="sourceLine" id="cb114-19" title="19" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">        <span class="op" style="color: #666666;">}</span></a>
<a class="sourceLine" id="cb114-20" title="20" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;"></a>
<a class="sourceLine" id="cb114-21" title="21" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">        <span class="kw" style="color: #007020; font-weight: bold;">this</span>.<span class="at" style="color: #7d9029;">setState</span>(</a>
<a class="sourceLine" id="cb114-22" title="22" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">            <span class="op" style="color: #666666;">{</span></a>
<a class="sourceLine" id="cb114-23" title="23" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">                <span class="dt" style="color: #902000;">jobTitleFilter</span><span class="op" style="color: #666666;">:</span> filter<span class="op" style="color: #666666;">,</span></a>
<a class="sourceLine" id="cb114-24" title="24" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">                <span class="dt" style="color: #902000;">jobTitle</span><span class="op" style="color: #666666;">:</span> title</a>
<a class="sourceLine" id="cb114-25" title="25" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">            <span class="op" style="color: #666666;">},</span></a>
<a class="sourceLine" id="cb114-26" title="26" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">            () <span class="kw" style="color: #007020; font-weight: bold;">=&gt;</span> <span class="kw" style="color: #007020; font-weight: bold;">this</span>.<span class="at" style="color: #7d9029;">reportUpdateUpTheChain</span>()</a>
<a class="sourceLine" id="cb114-27" title="27" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">        )<span class="op" style="color: #666666;">;</span></a>
<a class="sourceLine" id="cb114-28" title="28" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">    <span class="op" style="color: #666666;">};</span></a>
<a class="sourceLine" id="cb114-29" title="29" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;"></a>
<a class="sourceLine" id="cb114-30" title="30" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">    updateUSstateFilter <span class="op" style="color: #666666;">=</span> (USstate<span class="op" style="color: #666666;">,</span> reset) <span class="kw" style="color: #007020; font-weight: bold;">=&gt;</span> <span class="op" style="color: #666666;">{</span></a>
<a class="sourceLine" id="cb114-31" title="31" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">        <span class="kw" style="color: #007020; font-weight: bold;">let</span> filter <span class="op" style="color: #666666;">=</span> d <span class="kw" style="color: #007020; font-weight: bold;">=&gt;</span> <span class="va" style="color: #19177c;">d</span>.<span class="at" style="color: #7d9029;">USstate</span> <span class="op" style="color: #666666;">===</span> USstate<span class="op" style="color: #666666;">;</span></a>
<a class="sourceLine" id="cb114-32" title="32" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;"></a>
<a class="sourceLine" id="cb114-33" title="33" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">        <span class="cf" style="color: #007020; font-weight: bold;">if</span> (reset <span class="op" style="color: #666666;">||</span> <span class="op" style="color: #666666;">!</span>USstate) <span class="op" style="color: #666666;">{</span></a>
<a class="sourceLine" id="cb114-34" title="34" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">            filter <span class="op" style="color: #666666;">=</span> () <span class="kw" style="color: #007020; font-weight: bold;">=&gt;</span> <span class="kw" style="color: #007020; font-weight: bold;">true</span><span class="op" style="color: #666666;">;</span></a>
<a class="sourceLine" id="cb114-35" title="35" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">            USstate <span class="op" style="color: #666666;">=</span> <span class="st" style="color: #4070a0;">&quot;*&quot;</span><span class="op" style="color: #666666;">;</span></a>
<a class="sourceLine" id="cb114-36" title="36" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">        <span class="op" style="color: #666666;">}</span></a>
<a class="sourceLine" id="cb114-37" title="37" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;"></a>
<a class="sourceLine" id="cb114-38" title="38" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">        <span class="kw" style="color: #007020; font-weight: bold;">this</span>.<span class="at" style="color: #7d9029;">setState</span>(</a>
<a class="sourceLine" id="cb114-39" title="39" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">            <span class="op" style="color: #666666;">{</span></a>
<a class="sourceLine" id="cb114-40" title="40" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">                <span class="dt" style="color: #902000;">USstateFilter</span><span class="op" style="color: #666666;">:</span> filter<span class="op" style="color: #666666;">,</span></a>
<a class="sourceLine" id="cb114-41" title="41" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">                <span class="dt" style="color: #902000;">USstate</span><span class="op" style="color: #666666;">:</span> USstate</a>
<a class="sourceLine" id="cb114-42" title="42" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">            <span class="op" style="color: #666666;">},</span></a>
<a class="sourceLine" id="cb114-43" title="43" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">            () <span class="kw" style="color: #007020; font-weight: bold;">=&gt;</span> <span class="kw" style="color: #007020; font-weight: bold;">this</span>.<span class="at" style="color: #7d9029;">reportUpdateUpTheChain</span>()</a>
<a class="sourceLine" id="cb114-44" title="44" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">        )<span class="op" style="color: #666666;">;</span></a>
<a class="sourceLine" id="cb114-45" title="45" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">    <span class="op" style="color: #666666;">};</span></a>
<a class="sourceLine" id="cb114-46" title="46" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;"></a>
<a class="sourceLine" id="cb114-47" title="47" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">    <span class="co" style="color: #60a0b0; font-style: italic;">// ..</span></a>
<a class="sourceLine" id="cb114-48" title="48" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;"><span class="op" style="color: #666666;">}</span></a>
<a class="sourceLine" id="cb114-49" title="49" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;"></a>
<a class="sourceLine" id="cb114-50" title="50" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;"><span class="im">export</span> <span class="im">default</span> Controls<span class="op" style="color: #666666;">;</span></a></code></pre>
</div>
<p>
  Yes, they’re basically the same as
  <code style="white-space: pre-wrap;">updateYearFilter</code>. The only
  difference is a changed
  <code style="white-space: pre-wrap;">filter</code> function and using
  different keys in <code style="white-space: pre-wrap;">setState()</code>.
</p>
<p>
  Why separate functions then? No need to get fancy. It would’ve made the
  code harder to read.
</p>
<p>
  Our last step is to add these new keys to the
  <code style="white-space: pre-wrap;">reportUpdateUpTheChain</code>
  function.
</p>
<div
  class="sourceCode"
  id="cb115"
  data-caption="Add new filters to main state update"
  style="overflow: visible; margin: 1em 0;"
>
  <pre
    class="sourceCode javascript"
    style="overflow: visible; margin: 0;"
  ><code class="sourceCode javascript" style="overflow: visible; white-space: pre; position: relative;"><a class="sourceLine" id="cb115-1" title="1" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;"><span class="co" style="color: #60a0b0; font-style: italic;">// src/components/Controls/index.js</span></a>
<a class="sourceLine" id="cb115-2" title="2" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;"></a>
<a class="sourceLine" id="cb115-3" title="3" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;"><span class="kw" style="color: #007020; font-weight: bold;">class</span> Controls <span class="kw" style="color: #007020; font-weight: bold;">extends</span> <span class="va" style="color: #19177c;">React</span>.<span class="at" style="color: #7d9029;">Component</span> <span class="op" style="color: #666666;">{</span></a>
<a class="sourceLine" id="cb115-4" title="4" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">    <span class="at" style="color: #7d9029;">reportUpdateUpTheChain</span>() <span class="op" style="color: #666666;">{</span></a>
<a class="sourceLine" id="cb115-5" title="5" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">        <span class="kw" style="color: #007020; font-weight: bold;">this</span>.<span class="va" style="color: #19177c;">props</span>.<span class="at" style="color: #7d9029;">updateDataFilter</span>(</a>
<a class="sourceLine" id="cb115-6" title="6" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">            (filters <span class="kw" style="color: #007020; font-weight: bold;">=&gt;</span> <span class="op" style="color: #666666;">{</span></a>
<a class="sourceLine" id="cb115-7" title="7" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">                <span class="cf" style="color: #007020; font-weight: bold;">return</span> d <span class="kw" style="color: #007020; font-weight: bold;">=&gt;</span></a>
<a class="sourceLine" id="cb115-8" title="8" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">                    <span class="va" style="color: #19177c;">filters</span>.<span class="at" style="color: #7d9029;">yearFilter</span>(d) <span class="op" style="color: #666666;">&amp;&amp;</span></a>
<a class="sourceLine" id="cb115-9" title="9" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">                    <span class="va" style="color: #19177c;">filters</span>.<span class="at" style="color: #7d9029;">jobTitleFilter</span>(d) <span class="op" style="color: #666666;">&amp;&amp;</span></a>
<a class="sourceLine" id="cb115-10" title="10" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">                    <span class="va" style="color: #19177c;">filters</span>.<span class="at" style="color: #7d9029;">USstateFilter</span>(d)<span class="op" style="color: #666666;">;</span></a>
<a class="sourceLine" id="cb115-11" title="11" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">            <span class="op" style="color: #666666;">}</span>)(<span class="kw" style="color: #007020; font-weight: bold;">this</span>.<span class="at" style="color: #7d9029;">state</span>)<span class="op" style="color: #666666;">,</span></a>
<a class="sourceLine" id="cb115-12" title="12" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">            <span class="op" style="color: #666666;">{</span></a>
<a class="sourceLine" id="cb115-13" title="13" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">                <span class="dt" style="color: #902000;">USstate</span><span class="op" style="color: #666666;">:</span> <span class="kw" style="color: #007020; font-weight: bold;">this</span>.<span class="va" style="color: #19177c;">state</span>.<span class="at" style="color: #7d9029;">USstate</span><span class="op" style="color: #666666;">,</span></a>
<a class="sourceLine" id="cb115-14" title="14" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">                <span class="dt" style="color: #902000;">year</span><span class="op" style="color: #666666;">:</span> <span class="kw" style="color: #007020; font-weight: bold;">this</span>.<span class="va" style="color: #19177c;">state</span>.<span class="at" style="color: #7d9029;">year</span><span class="op" style="color: #666666;">,</span></a>
<a class="sourceLine" id="cb115-15" title="15" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">                <span class="dt" style="color: #902000;">jobTitle</span><span class="op" style="color: #666666;">:</span> <span class="kw" style="color: #007020; font-weight: bold;">this</span>.<span class="va" style="color: #19177c;">state</span>.<span class="at" style="color: #7d9029;">jobTitle</span></a>
<a class="sourceLine" id="cb115-16" title="16" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">            <span class="op" style="color: #666666;">}</span></a>
<a class="sourceLine" id="cb115-17" title="17" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">        )<span class="op" style="color: #666666;">;</span></a>
<a class="sourceLine" id="cb115-18" title="18" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">    <span class="op" style="color: #666666;">}</span></a></code></pre>
</div>
<p>
  We add them to the filter condition with
  <code style="white-space: pre-wrap;">&amp;&amp;</code> and expand the
  <code style="white-space: pre-wrap;">filteredBy</code> argument.
</p>
<p>Two more rows of filters show up.</p>
<figure>
  <img
    src="https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/all-filters.png"
    alt="All the filters"
  />
  <figcaption>All the filters</figcaption>
</figure>
<p>👏</p>
<p>
  Again, if it didn’t work, consult
  <a
    href="https://github.com/Swizec/react-d3js-step-by-step/commit/a45c33e172297ca1bbcfdc76733eae75779ebd7f"
    >the diff on GitHub</a
  >.
</p>