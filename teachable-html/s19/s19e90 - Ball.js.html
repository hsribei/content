<h3 id="ball.js">Ball.js</h3>
<p>Youâ€™ve rendered a ball before: Itâ€™s an SVG circle. You can make it fancier, but thatâ€™s not the point. The point are transitions.</p>
<p>The way D3 transitions work with React feels like combining the blackbox and full integration approaches. Full integration for rendering, switch to blackbox for the transition, release control back to React. ðŸ¤¯</p>
<div class="sourceCode" id="cb130" data-caption="Rendering a ball"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb130-1" title="1"><span class="kw">class</span> Ball <span class="kw">extends</span> <span class="va">React</span>.<span class="at">PureComponent</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb130-2" title="2">  <span class="at">constructor</span>(props) <span class="op">{</span></a>
<a class="sourceLine" id="cb130-3" title="3">    <span class="kw">super</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb130-4" title="4">    <span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb130-5" title="5">      <span class="dt">x</span><span class="op">:</span> <span class="va">props</span>.<span class="at">x</span></a>
<a class="sourceLine" id="cb130-6" title="6">    <span class="op">};</span></a>
<a class="sourceLine" id="cb130-7" title="7">  <span class="op">}</span></a>
<a class="sourceLine" id="cb130-8" title="8"></a>
<a class="sourceLine" id="cb130-9" title="9">  circleRef <span class="op">=</span> <span class="va">React</span>.<span class="at">createRef</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb130-10" title="10"></a>
<a class="sourceLine" id="cb130-11" title="11"></a>
<a class="sourceLine" id="cb130-12" title="12">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb130-13" title="13">    <span class="kw">const</span> <span class="op">{</span> x<span class="op">,</span> y <span class="op">}</span> <span class="op">=</span> <span class="kw">this</span>.<span class="at">state</span><span class="op">;</span></a>
<a class="sourceLine" id="cb130-14" title="14"></a>
<a class="sourceLine" id="cb130-15" title="15">    <span class="cf">return</span> <span class="op">&lt;</span>circle r<span class="op">=</span><span class="st">&quot;10&quot;</span> cx<span class="op">={</span>x<span class="op">}</span> cy<span class="op">={</span><span class="dv">10</span><span class="op">}</span> ref<span class="op">={</span><span class="kw">this</span>.<span class="at">circleRef</span><span class="op">}</span> /&gt;<span class="op">;</span></a>
<a class="sourceLine" id="cb130-16" title="16">  <span class="op">}</span></a>
<a class="sourceLine" id="cb130-17" title="17"><span class="op">}</span></a></code></pre></div>
<p>We render a <code>circle</code> at <code>x</code> coordinate and a random <code>y</code> and give it a React ref. Weâ€™ll use this ref to give control of the DOM node to D3. Just like blackbox components.</p>
<p>The interesting part is that we use a constructor to copy our <code>x</code> prop into state. Thatâ€™s because weâ€™re going to use props as a sort of staging area for what we <em>want</em> <code>x</code> to be, not what it currently is.</p>
<p>Props change, state stays the same. React doesnâ€™t move our ball.</p>