<h2 id="step-3-update-app">Step 3: Update App</h2>
<p>We use our new Preloader component in App – <code>src/App.js</code>. Let’s remove the <code>create-react-app</code> defaults and import our <code>Preloader</code> component.</p>
<div class="sourceCode" id="cb54" data-caption="Revamp App.js"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb54-1" title="1"><span class="co">// src/App.js</span></a>
<a class="sourceLine" id="cb54-2" title="2"></a>
<a class="sourceLine" id="cb54-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb54-4" title="4"><span class="co">// markua-start-delete</span></a>
<a class="sourceLine" id="cb54-5" title="5"><span class="im">import</span> logo <span class="im">from</span> <span class="st">&#39;./logo.svg&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb54-6" title="6"><span class="im">import</span> <span class="st">&#39;./App.css&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb54-7" title="7"><span class="co">// markua-end-delete</span></a>
<a class="sourceLine" id="cb54-8" title="8"></a>
<a class="sourceLine" id="cb54-9" title="9"><span class="co">// markua-start-insert</span></a>
<a class="sourceLine" id="cb54-10" title="10"><span class="im">import</span> Preloader <span class="im">from</span> <span class="st">&#39;./components/Preloader&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb54-11" title="11"><span class="co">// markua-end-insert</span></a>
<a class="sourceLine" id="cb54-12" title="12"></a>
<a class="sourceLine" id="cb54-13" title="13"><span class="kw">class</span> App <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb54-14" title="14">    <span class="co">// markua-start-delete</span></a>
<a class="sourceLine" id="cb54-15" title="15">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb54-16" title="16">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb54-17" title="17">      <span class="op">&lt;</span>div className<span class="op">=</span><span class="st">&quot;App&quot;</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb54-18" title="18">        <span class="op">&lt;</span>div className<span class="op">=</span><span class="st">&quot;App-header&quot;</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb54-19" title="19">          <span class="op">&lt;</span>img src<span class="op">={</span>logo<span class="op">}</span> className<span class="op">=</span><span class="st">&quot;App-logo&quot;</span> alt<span class="op">=</span><span class="st">&quot;logo&quot;</span> /&gt;</a>
<a class="sourceLine" id="cb54-20" title="20">          <span class="op">&lt;</span>h2<span class="op">&gt;</span>Welcome to React&lt;/h2<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb54-21" title="21">        &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb54-22" title="22">        <span class="op">&lt;</span>p className<span class="op">=</span><span class="st">&quot;App-intro&quot;</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb54-23" title="23">          To get started<span class="op">,</span> edit <span class="op">&lt;</span>code<span class="op">&gt;</span>src/<span class="va">App</span>.<span class="at">js</span>&lt;/code<span class="op">&gt;</span> and save to <span class="va">reload</span>.</a>
<a class="sourceLine" id="cb54-24" title="24">        &lt;/p<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb54-25" title="25">      &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb54-26" title="26">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb54-27" title="27">  <span class="op">}</span></a>
<a class="sourceLine" id="cb54-28" title="28">    <span class="co">// markua-end-delete</span></a>
<a class="sourceLine" id="cb54-29" title="29"><span class="op">}</span></a>
<a class="sourceLine" id="cb54-30" title="30"></a>
<a class="sourceLine" id="cb54-31" title="31"><span class="im">export</span> <span class="im">default</span> App<span class="op">;</span></a></code></pre></div>
<p>We removed the logo and style imports, added an import for <code>Preloader</code>, and gutted the <code>App</code> class. It’s great for a default app, but we don’t need that anymore.</p>
<p>Let’s define a default <code>state</code> and a <code>render</code> method that uses our <code>Preloader</code> component when there’s no data.</p>
<div class="sourceCode" id="cb55" data-caption="Render our preloader"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb55-1" title="1"><span class="co">// src/App.js</span></a>
<a class="sourceLine" id="cb55-2" title="2"></a>
<a class="sourceLine" id="cb55-3" title="3"><span class="kw">class</span> App <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb55-4" title="4">    <span class="co">// markua-start-insert</span></a>
<a class="sourceLine" id="cb55-5" title="5">    state <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb55-6" title="6">        <span class="dt">techSalaries</span><span class="op">:</span> []</a>
<a class="sourceLine" id="cb55-7" title="7">    <span class="op">}</span></a>
<a class="sourceLine" id="cb55-8" title="8"></a>
<a class="sourceLine" id="cb55-9" title="9">    <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb55-10" title="10">        <span class="kw">const</span> <span class="op">{</span> techSalaries <span class="op">}</span> <span class="op">=</span> <span class="kw">this</span>.<span class="at">state</span><span class="op">;</span></a>
<a class="sourceLine" id="cb55-11" title="11">        </a>
<a class="sourceLine" id="cb55-12" title="12">        <span class="cf">if</span> (<span class="va">techSalaries</span>.<span class="at">length</span> <span class="op">&lt;</span> <span class="dv">1</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb55-13" title="13">            <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb55-14" title="14">                <span class="op">&lt;</span>Preloader /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb55-15" title="15">            )<span class="op">;</span></a>
<a class="sourceLine" id="cb55-16" title="16">        <span class="op">}</span></a>
<a class="sourceLine" id="cb55-17" title="17"></a>
<a class="sourceLine" id="cb55-18" title="18">        <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb55-19" title="19">            <span class="op">&lt;</span>div className<span class="op">=</span><span class="st">&quot;App&quot;</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb55-20" title="20"></a>
<a class="sourceLine" id="cb55-21" title="21">            &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb55-22" title="22">        )<span class="op">;</span></a>
<a class="sourceLine" id="cb55-23" title="23">    <span class="op">}</span></a>
<a class="sourceLine" id="cb55-24" title="24">    <span class="co">// markua-end-insert</span></a>
<a class="sourceLine" id="cb55-25" title="25"><span class="op">}</span></a></code></pre></div>
<p>Nowadays we can define properties directly in the class body without a constructor method. It’s not part of the official JavaScript standard yet, but most React codebases use this pattern.</p>
<p>Properties defined this way are bound to each instance of our components so they have the correct <code>this</code> value. Late you’ll see we can use this shorthand to neatly define event handlers.</p>
<p>We set <code>techSalaries</code> to an empty array by default. In <code>render</code> we use object destructuring to take <code>techSalaries</code> out of component state, <code>this.state</code>, and check whether it’s empty. When <code>techSalaries</code> is empty our component renders the preloader, otherwise an empty div.</p>
<p>If your <code>npm start</code> is running, the preloader should show up on your screen.</p>
<figure>
<img src="https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/preloader-without-styles-screenshot.png" alt="Preloader without Bootstrap styles" /><figcaption>Preloader without Bootstrap styles</figcaption>
</figure>
<p>Hmm… that’s not very pretty. Let’s fix it.</p>