<h2 id="step-3-update-app">Step 3: Update App</h2>
<p>We use our new Preloader component in App – <code style="white-space: pre-wrap;">src/App.js</code>. Let’s remove the <code style="white-space: pre-wrap;">create-react-app</code> defaults and import our <code style="white-space: pre-wrap;">Preloader</code> component.</p>
<div class="sourceCode" id="cb54" data-caption="Revamp App.js" style="overflow: visible; margin: 1em 0;"><pre class="sourceCode javascript" style="overflow: visible; margin: 0;"><code class="sourceCode javascript" style="overflow: visible; white-space: pre; position: relative;"><a class="sourceLine" id="cb54-1" title="1" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;"><span class="co" style="color: #60a0b0; font-style: italic;">// src/App.js</span></a>
<a class="sourceLine" id="cb54-2" title="2" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;"></a>
<a class="sourceLine" id="cb54-3" title="3" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;"><span class="im">import</span> React <span class="im">from</span> <span class="st" style="color: #4070a0;">&#39;react&#39;</span><span class="op" style="color: #666666;">;</span></a>
<a class="sourceLine" id="cb54-4" title="4" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;"><span class="co" style="color: #60a0b0; font-style: italic;">// Delete the line(s) between here...</span></a>
<a class="sourceLine" id="cb54-5" title="5" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;"><span class="im">import</span> logo <span class="im">from</span> <span class="st" style="color: #4070a0;">&#39;./logo.svg&#39;</span><span class="op" style="color: #666666;">;</span></a>
<a class="sourceLine" id="cb54-6" title="6" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;"><span class="im">import</span> <span class="st" style="color: #4070a0;">&#39;./App.css&#39;</span><span class="op" style="color: #666666;">;</span></a>
<a class="sourceLine" id="cb54-7" title="7" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;"><span class="co" style="color: #60a0b0; font-style: italic;">// ...and here.</span></a>
<a class="sourceLine" id="cb54-8" title="8" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;"></a>
<a class="sourceLine" id="cb54-9" title="9" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;"><span class="co" style="color: #60a0b0; font-style: italic;">// Insert the line(s) between here...</span></a>
<a class="sourceLine" id="cb54-10" title="10" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;"><span class="im">import</span> Preloader <span class="im">from</span> <span class="st" style="color: #4070a0;">&#39;./components/Preloader&#39;</span><span class="op" style="color: #666666;">;</span></a>
<a class="sourceLine" id="cb54-11" title="11" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;"><span class="co" style="color: #60a0b0; font-style: italic;">// ...and here.</span></a>
<a class="sourceLine" id="cb54-12" title="12" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;"></a>
<a class="sourceLine" id="cb54-13" title="13" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;"><span class="kw" style="color: #007020; font-weight: bold;">class</span> App <span class="kw" style="color: #007020; font-weight: bold;">extends</span> <span class="va" style="color: #19177c;">React</span>.<span class="at" style="color: #7d9029;">Component</span> <span class="op" style="color: #666666;">{</span></a>
<a class="sourceLine" id="cb54-14" title="14" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">    <span class="co" style="color: #60a0b0; font-style: italic;">// Delete the line(s) between here...</span></a>
<a class="sourceLine" id="cb54-15" title="15" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">  <span class="at" style="color: #7d9029;">render</span>() <span class="op" style="color: #666666;">{</span></a>
<a class="sourceLine" id="cb54-16" title="16" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">    <span class="cf" style="color: #007020; font-weight: bold;">return</span> (</a>
<a class="sourceLine" id="cb54-17" title="17" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">      <span class="op" style="color: #666666;">&lt;</span>div className<span class="op" style="color: #666666;">=</span><span class="st" style="color: #4070a0;">&quot;App&quot;</span><span class="op" style="color: #666666;">&gt;</span></a>
<a class="sourceLine" id="cb54-18" title="18" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">        <span class="op" style="color: #666666;">&lt;</span>div className<span class="op" style="color: #666666;">=</span><span class="st" style="color: #4070a0;">&quot;App-header&quot;</span><span class="op" style="color: #666666;">&gt;</span></a>
<a class="sourceLine" id="cb54-19" title="19" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">          <span class="op" style="color: #666666;">&lt;</span>img src<span class="op" style="color: #666666;">={</span>logo<span class="op" style="color: #666666;">}</span> className<span class="op" style="color: #666666;">=</span><span class="st" style="color: #4070a0;">&quot;App-logo&quot;</span> alt<span class="op" style="color: #666666;">=</span><span class="st" style="color: #4070a0;">&quot;logo&quot;</span> /&gt;</a>
<a class="sourceLine" id="cb54-20" title="20" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">          <span class="op" style="color: #666666;">&lt;</span>h2<span class="op" style="color: #666666;">&gt;</span>Welcome to React&lt;/h2<span class="op" style="color: #666666;">&gt;</span></a>
<a class="sourceLine" id="cb54-21" title="21" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">        &lt;/div<span class="op" style="color: #666666;">&gt;</span></a>
<a class="sourceLine" id="cb54-22" title="22" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">        <span class="op" style="color: #666666;">&lt;</span>p className<span class="op" style="color: #666666;">=</span><span class="st" style="color: #4070a0;">&quot;App-intro&quot;</span><span class="op" style="color: #666666;">&gt;</span></a>
<a class="sourceLine" id="cb54-23" title="23" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">          To get started<span class="op" style="color: #666666;">,</span> edit <span class="op" style="color: #666666;">&lt;</span>code<span class="op" style="color: #666666;">&gt;</span>src/<span class="va" style="color: #19177c;">App</span>.<span class="at" style="color: #7d9029;">js</span>&lt;/code<span class="op" style="color: #666666;">&gt;</span> and save to <span class="va" style="color: #19177c;">reload</span>.</a>
<a class="sourceLine" id="cb54-24" title="24" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">        &lt;/p<span class="op" style="color: #666666;">&gt;</span></a>
<a class="sourceLine" id="cb54-25" title="25" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">      &lt;/div<span class="op" style="color: #666666;">&gt;</span></a>
<a class="sourceLine" id="cb54-26" title="26" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">    )<span class="op" style="color: #666666;">;</span></a>
<a class="sourceLine" id="cb54-27" title="27" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">  <span class="op" style="color: #666666;">}</span></a>
<a class="sourceLine" id="cb54-28" title="28" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">    <span class="co" style="color: #60a0b0; font-style: italic;">// ...and here.</span></a>
<a class="sourceLine" id="cb54-29" title="29" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;"><span class="op" style="color: #666666;">}</span></a>
<a class="sourceLine" id="cb54-30" title="30" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;"></a>
<a class="sourceLine" id="cb54-31" title="31" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;"><span class="im">export</span> <span class="im">default</span> App<span class="op" style="color: #666666;">;</span></a></code></pre></div>
<p>We removed the logo and style imports, added an import for <code style="white-space: pre-wrap;">Preloader</code>, and gutted the <code style="white-space: pre-wrap;">App</code> class. It’s great for a default app, but we don’t need that anymore.</p>
<p>Let’s define a default <code style="white-space: pre-wrap;">state</code> and a <code style="white-space: pre-wrap;">render</code> method that uses our <code style="white-space: pre-wrap;">Preloader</code> component when there’s no data.</p>
<div class="sourceCode" id="cb55" data-caption="Render our preloader" style="overflow: visible; margin: 1em 0;"><pre class="sourceCode javascript" style="overflow: visible; margin: 0;"><code class="sourceCode javascript" style="overflow: visible; white-space: pre; position: relative;"><a class="sourceLine" id="cb55-1" title="1" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;"><span class="co" style="color: #60a0b0; font-style: italic;">// src/App.js</span></a>
<a class="sourceLine" id="cb55-2" title="2" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;"></a>
<a class="sourceLine" id="cb55-3" title="3" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;"><span class="kw" style="color: #007020; font-weight: bold;">class</span> App <span class="kw" style="color: #007020; font-weight: bold;">extends</span> <span class="va" style="color: #19177c;">React</span>.<span class="at" style="color: #7d9029;">Component</span> <span class="op" style="color: #666666;">{</span></a>
<a class="sourceLine" id="cb55-4" title="4" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">    <span class="co" style="color: #60a0b0; font-style: italic;">// Insert the line(s) between here...</span></a>
<a class="sourceLine" id="cb55-5" title="5" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">    state <span class="op" style="color: #666666;">=</span> <span class="op" style="color: #666666;">{</span></a>
<a class="sourceLine" id="cb55-6" title="6" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">        <span class="dt" style="color: #902000;">techSalaries</span><span class="op" style="color: #666666;">:</span> []</a>
<a class="sourceLine" id="cb55-7" title="7" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">    <span class="op" style="color: #666666;">}</span></a>
<a class="sourceLine" id="cb55-8" title="8" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;"></a>
<a class="sourceLine" id="cb55-9" title="9" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">    <span class="at" style="color: #7d9029;">render</span>() <span class="op" style="color: #666666;">{</span></a>
<a class="sourceLine" id="cb55-10" title="10" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">        <span class="kw" style="color: #007020; font-weight: bold;">const</span> <span class="op" style="color: #666666;">{</span> techSalaries <span class="op" style="color: #666666;">}</span> <span class="op" style="color: #666666;">=</span> <span class="kw" style="color: #007020; font-weight: bold;">this</span>.<span class="at" style="color: #7d9029;">state</span><span class="op" style="color: #666666;">;</span></a>
<a class="sourceLine" id="cb55-11" title="11" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">        </a>
<a class="sourceLine" id="cb55-12" title="12" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">        <span class="cf" style="color: #007020; font-weight: bold;">if</span> (<span class="va" style="color: #19177c;">techSalaries</span>.<span class="at" style="color: #7d9029;">length</span> <span class="op" style="color: #666666;">&lt;</span> <span class="dv" style="color: #40a070;">1</span>) <span class="op" style="color: #666666;">{</span></a>
<a class="sourceLine" id="cb55-13" title="13" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">            <span class="cf" style="color: #007020; font-weight: bold;">return</span> (</a>
<a class="sourceLine" id="cb55-14" title="14" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">                <span class="op" style="color: #666666;">&lt;</span>Preloader /<span class="op" style="color: #666666;">&gt;</span></a>
<a class="sourceLine" id="cb55-15" title="15" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">            )<span class="op" style="color: #666666;">;</span></a>
<a class="sourceLine" id="cb55-16" title="16" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">        <span class="op" style="color: #666666;">}</span></a>
<a class="sourceLine" id="cb55-17" title="17" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;"></a>
<a class="sourceLine" id="cb55-18" title="18" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">        <span class="cf" style="color: #007020; font-weight: bold;">return</span> (</a>
<a class="sourceLine" id="cb55-19" title="19" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">            <span class="op" style="color: #666666;">&lt;</span>div className<span class="op" style="color: #666666;">=</span><span class="st" style="color: #4070a0;">&quot;App&quot;</span><span class="op" style="color: #666666;">&gt;</span></a>
<a class="sourceLine" id="cb55-20" title="20" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit; height: 1.2em;"></a>
<a class="sourceLine" id="cb55-21" title="21" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">            &lt;/div<span class="op" style="color: #666666;">&gt;</span></a>
<a class="sourceLine" id="cb55-22" title="22" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">        )<span class="op" style="color: #666666;">;</span></a>
<a class="sourceLine" id="cb55-23" title="23" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">    <span class="op" style="color: #666666;">}</span></a>
<a class="sourceLine" id="cb55-24" title="24" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;">    <span class="co" style="color: #60a0b0; font-style: italic;">// ...and here.</span></a>
<a class="sourceLine" id="cb55-25" title="25" style="display: inline-block; line-height: 1.25; pointer-events: none; color: inherit; text-decoration: inherit;"><span class="op" style="color: #666666;">}</span></a></code></pre></div>
<p>Nowadays we can define properties directly in the class body without a constructor method. It’s not part of the official JavaScript standard yet, but most React codebases use this pattern.</p>
<p>Properties defined this way are bound to each instance of our components so they have the correct <code style="white-space: pre-wrap;">this</code> value. Late you’ll see we can use this shorthand to neatly define event handlers.</p>
<p>We set <code style="white-space: pre-wrap;">techSalaries</code> to an empty array by default. In <code style="white-space: pre-wrap;">render</code> we use object destructuring to take <code style="white-space: pre-wrap;">techSalaries</code> out of component state, <code style="white-space: pre-wrap;">this.state</code>, and check whether it’s empty. When <code style="white-space: pre-wrap;">techSalaries</code> is empty our component renders the preloader, otherwise an empty div.</p>
<p>If your <code style="white-space: pre-wrap;">npm start</code> is running, the preloader should show up on your screen.</p>
<figure>
<img src="https://raw.githubusercontent.com/Swizec/react-d3js-es6-ebook/2018-version/manuscript/resources/images/es6v2/preloader-without-styles-screenshot.png" alt="Preloader without Bootstrap styles"><figcaption>Preloader without Bootstrap styles</figcaption>
</figure>
<p>Hmm… that’s not very pretty. Let’s fix it.</p>